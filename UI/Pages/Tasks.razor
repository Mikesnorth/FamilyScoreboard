@page "/tasks";
@using Task = System.Threading.Tasks.Task;
@using TaskModel = Models.Task;
@using Newtonsoft.Json;
@inject HttpClient httpClient;

<h3>Tasks</h3>

@if (tasks == null) {
    <h3>Loading...</h3>
}
else {
    foreach (var task in tasks) {
        <div class="row">
            <div class="col-lg-12 well">
                <strong>@task.Name</strong><br />
                @task.Description<br />
                Points: @task.PointValue
                <hr />
            </div>
        </div>
    }
}


@code {
    private List<TaskModel> tasks;

    protected override async Task OnInitializedAsync()
    {
        var response = await httpClient.GetAsync("Tasks");
        if (response.IsSuccessStatusCode)
        {
            tasks = JsonConvert.DeserializeObject<List<TaskModel>>(await response.Content.ReadAsStringAsync());
        }
    }
}
